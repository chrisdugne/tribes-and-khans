<?xml version="1.0" encoding="utf-8"?>
<EventMap  
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns="http://mate.asfusion.com/">
	<mx:Script>
		<![CDATA[
			import com.uralys.tribes.constants.Names;
			import com.uralys.tribes.events.AccountEvent;
			import com.uralys.tribes.managers.AccountManager;
			import com.uralys.utils.FaultHandler;
		]]>
	</mx:Script>
	
	<Debugger level="{Debugger.ALL}" />

	<EventHandlers type="{AccountEvent.REGISTER}" debug="true">
		<RemoteObjectInvoker
			showBusyCursor = "true"
			destination="PlayerWrapper" 
			endpoint="{Names.URALYS_LOGGER_SERVER_AMF_ENDPOINT}"
			arguments="{[event.email, event.password]}"
			method = "createPlayer"
			debug = "true">
			
			<faultHandlers>
				<MethodInvoker generator="{FaultHandler}" method="handleRemoteServiceFault" arguments="{fault}"/>
			</faultHandlers>
		</RemoteObjectInvoker>
	</EventHandlers>

	<EventHandlers type="{AccountEvent.LOGIN}" debug="true">
		<RemoteObjectInvoker
			showBusyCursor = "true"
			destination="PlayerWrapper" 
			endpoint="{Names.URALYS_LOGGER_SERVER_AMF_ENDPOINT}"
			arguments="{[event.email, event.password]}"
			method = "login"
			debug = "true">
			
			<resultHandlers>
				<MethodInvoker
					generator 	= "{AccountManager}"
					method 		= "resultLogin"
					arguments 	= "{resultObject}"
					/>
			</resultHandlers>
			<faultHandlers>
				<MethodInvoker generator="{FaultHandler}" method="handleRemoteServiceFault" arguments="{fault}"/>
			</faultHandlers>
		</RemoteObjectInvoker>
	</EventHandlers>

</EventMap>

<!--
<Injectors target="{TreeContrainte}">
<PropertyInjector targetKey="listNaturesOrientations" source="{GrillesManager}" sourceKey="listNaturesOrientations" />
<PropertyInjector targetKey="natures" source="{GrillesManager}" sourceKey="natures" />
</Injectors>
-->