<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/mx" 
				autoDrawBackground="true" 
				xmlns:renderers="com.uralys.tribes.renderers.*">
	<fx:Script>
		<![CDATA[
			//--------------------------------------------------------------------------------//

			import com.uralys.tribes.commons.Session;
			import com.uralys.tribes.entities.Player;
			import com.uralys.tribes.managers.GameManager;
			
			//--------------------------------------------------------------------------------//
			
			private function removePlayerFromAlly():void
			{
				var indexToremove:int = -1;
				for each(var player:Player in Session.player.ally.players){
					if(player.playerUID == data.playerUID){
						indexToremove = Session.player.ally.players.getItemIndex(player);
						GameManager.getInstance().removeFromAlly(player.playerUID, Session.player.ally.allyUID);
						break;
					}
				}
				
				if(indexToremove)
					Session.player.ally.players.removeItemAt(indexToremove);
			}
			
			//--------------------------------------------------------------------------------//
			
			private function promotePlayer():void{
				
			}

			private function demotePlayer():void{
				
			}
			
		]]>
	</fx:Script>
	
	<s:HGroup width="100%" 
			  horizontalAlign="center"
			  verticalAlign="middle"
			  paddingLeft="15"
			  paddingRight="15"
			  paddingBottom="4">
		
		<renderers:PlayerName player="{data}"/>
		<s:Spacer width="100%"/>
		<s:Image source="{ImageContainer.ARROW_PROMOTE}"
				 click="{promotePlayer()}"
				 visible="{Session.LOGGED_IN 
					 &amp;&amp; data.playerUID != Session.player.playerUID 
					 &amp;&amp; Session.allyLoaded != null 
					 &amp;&amp; Session.player.playerUID == Session.allyLoaded.players.getItemAt(0).playerUID}"/>
		<s:Image source="{ImageContainer.ARROW_DEMOTE}"
				 click="{demotePlayer()}"
				 visible="{Session.LOGGED_IN 
					 &amp;&amp; data.playerUID != Session.player.playerUID 
					 &amp;&amp; Session.allyLoaded != null 
					 &amp;&amp; Session.player.playerUID == Session.allyLoaded.players.getItemAt(0).playerUID}"/>
		
		<s:Spacer width="5"/>
		<s:Image source="{ImageContainer.CROSS}"
				 click="{removePlayerFromAlly()}"
				 visible="{Session.LOGGED_IN 
					 &amp;&amp; data.playerUID != Session.player.playerUID 
					 &amp;&amp; Session.allyLoaded != null 
					 &amp;&amp; Session.player.playerUID == Session.allyLoaded.players.getItemAt(0).playerUID}"/>
	</s:HGroup>
	
</s:ItemRenderer>
